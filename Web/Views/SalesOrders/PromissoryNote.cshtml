@using Mictlanix.BE
@using Mictlanix.BE.Model
@using Mictlanix.BE.Web.Models
@using Mictlanix.BE.Web.Helpers
@model SalesOrder

@{
		  var taxpayer = Model.Customer.Taxpayers.FirstOrDefault ();
		  Layout = WebConfig.PrintLayout;
		  ViewBag.WindowTitle = string.Format (Resources.PromissoryNote);
		  ViewBag.Title = Resources.PromissoryNote;
		  ViewBag.Store = Model.Store;
		  ViewBag.Taxpayer = taxpayer.ToString();
		  ViewBag.TaxpayerName = taxpayer.Name;
		  ViewBag.Address = taxpayer.Address;
}

<div style="float:left; clear:none">
	<table>
		<tr>
			<td>@Resources.SalesPerson: @Html.DisplayFor(x => Model.SalesPerson.Name)</td>
			<td>@Resources.SalesOrder: @Model.Id</td>
			<td>@Resources.Date: @Html.DisplayFor(x => Model.Date)</td>
		</tr>
		<tr>
			<td>@Resources.Customer: @Html.DisplayFor(x => taxpayer.Name)</td>
			<td>@Resources.TaxpayerId: @Html.DisplayFor(x => taxpayer.Id)</td>
		</tr>
		<tr>
			<th class="line nowrap">@Resources.Quantity</th>
			<th class="line nowrap">@Resources.UnitOfMeasurement</th>
			<th class="line nowrap">@Resources.ProductCode</th>
			<th class="line center">@Resources.ProductName</th>
			<th class="line nowrap">@Resources.Price</th>
			<th class="line nowrap">@Resources.VAT</th>
			<th class="line nowrap">@Resources.Amount</th>
		</tr>
		@foreach (var item in Model.Details) {
				<tr>
					<td class="number line">@Html.DisplayFor(x => item.Quantity)</td>
					<td class="center line">@Html.DisplayFor(x => item.Product.UnitOfMeasurement)</td>
					<td class="center line">@Html.DisplayFor(x => item.ProductCode)</td>
					<td class="line">@Html.DisplayFor(x => item.ProductName)</td>
					<td class="number line">@Html.DisplayFor(x => item.Price)</td>
					<td class="number line">@Html.DisplayFor(x => item.TaxRate)</td>
					<td class="number line">@Html.DisplayFor(x => item.Subtotal)</td>
				</tr>
		}
	</table>

	<table>
		<tr>
			<td rowspan="3" class="center">@Html.CurrencyToString(Model.Total, Model.Currency)</td>
			<td class="number">@Html.LabelFor(x => x.Subtotal)</td>
			<td class="number">@Html.DisplayFor(x => x.Subtotal)</td>
		</tr>
		<tr>
			<td class="number">@Html.LabelFor(x => x.Taxes)</td>
			<td class="number">@Html.DisplayFor(x => x.Taxes)</td>
		</tr>
		<tr>
			<td class="number">@Html.LabelFor(x => x.Total)</td>
			<td class="number">@Html.DisplayFor(x => x.Total)</td>
		</tr>
	</table>
	<p class="right">@string.Format(Resources.PromissoryNoteLegend, WebConfig.Company)</p>

</div>