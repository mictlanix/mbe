@using Mictlanix.BE
@using Mictlanix.BE.Model
@using Mictlanix.BE.Web.Models
@using Mictlanix.BE.Web.Helpers
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
@if (!string.IsNullOrEmpty (ViewBag.WindowTitle)) {
    <title>@ViewBag.WindowTitle</title>
} else {
    <title>@ViewBag.Title</title>
}
    <script src='@Url.Content("~/Scripts/jquery-1.9.1.min.js")' type='text/javascript'></script>
    <script src='@Url.Content("~/Scripts/FontLoader.js")' type='text/javascript'></script>
    <link href='@Url.Content("~/Content/bootstrap3/css/bootstrap.min.css")' rel='stylesheet' type='text/css' />
    <link href='@Url.Content("~/Content/printd.css")' rel='stylesheet' type='text/css' />
</head>
<body>
    <header>
		<div id="logo">
		@if(!string.IsNullOrEmpty(ViewBag.Store.Logo)) {
            <img src="@Url.Content(ViewBag.Store.Logo)" alt="Logo" />
        }
		</div>
        <h1 class="uppercase">
            @if (!string.IsNullOrEmpty (ViewBag.TaxpayerName)) {
        		@ViewBag.TaxpayerName<br/>
        	}
        	@if (!string.IsNullOrEmpty (ViewBag.Taxpayer)) {
        		@ViewBag.Taxpayer
        	}
        </h1>
        <h3>
        	@ViewBag.Address.StreetAndNumber<br/>
        	@ViewBag.Address.Neighborhood,
    	@if (!string.IsNullOrEmpty (ViewBag.Address.Locality)) {
        	<text>@ViewBag.Address.Locality,</text>
    	}
        	@ViewBag.Address.PostalCode<br/>
        	@ViewBag.Address.Borough,
        	@ViewBag.Address.State
    	</h3>
    </header>

    @RenderBody()

	<script type="text/javascript">
	$(function() {
		$('body, select, input, textarea, button, submit, form').prop('disabled', true);
		var fontLoader = new FontLoader(["wasabibook", "wasabilight"], {
            "fontsLoaded": function(error) {
	            window.print();
				setTimeout(function() {
				    $('body').bind('mousemove click keypress', function () {
				        window.close();
				    });
				}, 500);
            }
        }, 3000);
        fontLoader.loadFonts();
	});
	</script>
</body>
</html>
