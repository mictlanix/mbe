@using Mictlanix.BE
@using Mictlanix.BE.Web.Helpers
@using Mictlanix.BE.Model
@model SalesOrderPayment
<li id="payment@(Model.Id)">
    <div class="photo">
        <img src="@Url.Content("~/Content/icons/dollar.png")" title="@Resources.Pay" />
    </div>
    <div class='action-link'>
        <a class='button icon-only icon delete' title='@Resources.Message_DeleteConfirmation'
		   data-type='checklist' data-placement='left' data-pk='@Model.Id' data-source='{}' data-value='@Model.Id' data-url='@Url.Action("RemovePayment", new { id = Model.Id })' data-emptytext='' data-emptyclass=''></a>
    </div>
    <div class="info">
        <label>@Resources.Amount:</label>
        <span class="text">@Html.DisplayFor(x => x.Payment.Amount)</span>
        <br/>
        <label>@Resources.Type:</label>
        <span class="text">@Model.Payment.Method.GetDisplayName()</span>
		  <br />
        @if (!string.IsNullOrEmpty (Model.Payment.Reference)) {
            <label>@Resources.Reference:</label>
            <span class="text">@Model.Payment.Reference</span>
				<br />
        }

		 @if (Model.Payment.ExtraCharge != null) {
					<label>@Resources.Bank</label>
					<span class="text">@Model.Payment.ExtraCharge.Name</span><br />
					<label>Cargo en Tarjeta:</label>
					<span class="text"><b>@string.Format("{0:c}", Model.Payment.Amount * (Model.Payment.Commission + 1))</b></span><br />
					<label>Pagos mensuales:</label>
					<span class="text">@Model.Payment.ExtraCharge.NumberOfPayments pagos mensuales de @string.Format("{0:c}",(Model.Payment.Amount/Model.Payment.ExtraCharge.NumberOfPayments)*(Model.Payment.ExtraCharge.BankPaymentsCharge + 1)) c/u.</span>
		 }


    </div>
</li>
<script type='text/javascript'>
$('#payment@(Model.Id) a.delete').editable({
	success: function(response, newValue) {
        $('#payment@(Model.Id)').remove();
        updateTotals();
    }
});
</script>