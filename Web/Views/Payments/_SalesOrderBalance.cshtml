@using Mictlanix.BE
@using Mictlanix.BE.Model
@using Mictlanix.BE.Web.Helpers
@model SalesOrder

<ul class='labeled-frames pull-right'>
    <li>
    	<span class='caption'>@Resources.Total</span>
        <span class='value'>@Html.DisplayFor(x => x.TotalEx) @Configuration.BaseCurrency</span>
    @if (Model.Currency != Configuration.BaseCurrency) {
        <span class='value'>@Html.DisplayFor(x => x.Total) @Html.DisplayFor(x => x.Currency)</span>
    }
    </li>
    <li>
    	<span class='caption'>@Resources.Paid</span>
    	<span class='value'>@Html.DisplayFor(x => x.Paid) @Configuration.BaseCurrency</span>
    </li>
    <li>
    	<span class='caption'>@Resources.Change</span>
        <span class='value'>@Html.DisplayFor(x => x.Balance) @Configuration.BaseCurrency</span>
    </li>
</ul>

<div class='clearfix'></div>
<div class='pull-left'>
	@Html.ActionLink(Resources.Print, "Print", new { id = Model.Id }, new { @class = "button icon print", target = "_blank" })
</div>
@if(Model.Balance >= 0) {
<div id='confirm-button' class='pull-right' @if (Model.Details.Count == 0) {<text>style='display:none'</text>}>
	@using (Html.BeginForm("ConfirmPayment", "Payments", new { id = Model.Id })) {
	    <button type="submit" class='icon pay'>@Resources.CompletePayment</button>
	}
</div>
}
<div class='clearfix'></div>
<script type="text/javascript">
@if (Model.Balance >= 0) {
    <text>$("#form").hide("slow");</text>
} else {
	<text>
		$("#amount").val("@((-Model.Balance).ToString("0.00"))");
		$("#form").show("slow");
	</text>
}
</script>
